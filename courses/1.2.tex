\subsection{Подпоследовательности, частичные пределы. Верхний и нижний пределы \dots} %числовой последовательности. Теорема Больцано—Вейерштрасса. Критерий Коши сходимости числовой последовательности.}
\subsubsection{Подпоследовательность, частичные пределы}
\begin{definition}
	Подпоследовательностью последовательности $\{x_n\}_{n = 1}^\infty$ называется $\{x_{n_k}\}_{k = 1}^\infty$, где $\{n_k\}_{k = 1}^\infty$ - возрастающая последовательность натуральных чисел
\end{definition}

\begin{definition}
	Частичным пределом последовательности $\{x_n\}_{n = 1}^\infty$ называется предел её подпоследовательности.
\end{definition}

\begin{theorem} (Эквивалентное определение частичного предела)
	Число $l \in \R$ является частичным пределом $\{x_n\}_{n = 1}^\infty$ тогда и только тогда, когда $\forall \eps > 0\ \forall N \in \N\ \exists n > N\ |\ |x_n - l| < \eps$
\end{theorem}

\begin{proof}
\begin{enumerate}
	\item $l$ - частичный предел. То есть 
	$$
		l = \liml_{k \to \infty} x_{n_k} \lra \forall \eps > 0\ \exists K \in \N\ |\ \forall k > K\ |x_{n_k} - l| < \eps
	$$
	При этом помним, что $\{n_k\}$ - возрастающая последовательность натуральных чисел
	
	Следовательно, для $\forall N \in \N$ найдётся $K_1 \in \N\ |\ n_{K_1} > N$, а значит и $n := n_{K_1 + 1} \Ra n > n_{K_1} > N,\ |x_n - l| < \eps$
	
	В итоге имеем:
	$$
		\forall \eps > 0\ \forall N \in \N\ \exists n > N\ |\ |x_n - l| < \eps
	$$
	\item Пусть для $l$ верно, что $\forall \eps > 0\ \forall N \in \N\ \exists n > N\ |\ |x_n - l| < \eps$
	
	Построим сходящуюся подпоследовательность:
	\begin{align*}
		&\eps := 1 & &N := 1 & &\exists n_1 \in \N\ |\ n_1 > 1,\ |x_{n_1} - l| < 1
		\\
		&\eps := 1/2 & &N := n_1 & &\exists n_2 \in \N\ |\ n_2 > n_1,\ |x_{n_2} - l| < 1/2
		\\
		&\dots
	\end{align*}
	По построению $\{x_{n_k}\}_{k = 1}^\infty$ такова, что
	$\forall \eps > 0\ \exists K \in \N\ |\ \forall k > K\ |x_{n_k} - l| < \eps$
\end{enumerate}
\end{proof}

\subsubsection{Верхний и нижний предел числовой последовательности}

\begin{definition}
	\textit{Верхним пределом последовательности} $\{x_n\}_{n = 1}^\infty \subset R$ называется наибольший из её частичных пределов $\overline{\liml_{n \ra \infty}} x_n$.
\end{definition}

\begin{definition}
	\textit{Нижним пределом последовательности} $\{x_n\}_{n = 1}^\infty \subset R$ называется наименьший из её частичных пределов $\varliminf\limits_{n \ra \infty} x_n$.
\end{definition}

\begin{anote}
	Следует помнить, что частичный предел может быть бесконечным. Следовательно, верхний и нижний тоже.
\end{anote}

\begin{theorem} (3 определения верхнего и нижнего пределов)
	Для любой ограниченной последовательности $\{x_n\}_{n = 1}^\infty$ существуют \underline{конечные} $L = \overline{\liml_{n \to \infty}} x_n$, $l = \varliminf\limits_{n \to \infty} x_n$. Для них справедливы следующие утверждения:
	\begin{enumerate}
		\item $(\forall \eps > 0\ \exists N \in \N\ |\ \forall n > N\ x_n < L + \eps) \wedge (\forall \eps > 0\ \forall N \in \N\ \exists n > N\ x_n > L - \eps)$
		
		$(\forall \eps > 0\ \exists N \in \N\ |\ \forall n > N\ x_n > l - \eps) \wedge (\forall \eps > 0\ \forall N \in \N\ \exists n > N\ |\ x_n < l + \eps)$
		
		\item $L = \liml_{n \to \infty} \sup \{x_n, x_{n + 1}, \dots\};\ l = \liml_{n \to \infty} \inf \{x_n, x_{n + 1}, \dots\}$
	\end{enumerate}
	Причём определения равносильны (стандартное и эти 2 пункта).
\end{theorem}

\begin{proof}
	Доказательство приводится только для верхнего предела. Для нижнего просто аналогично.
	
	Рассмотрим последовательность $s_n := \sup \{x_n, x_{n + 1}, \dots\} = \sup\limits_{m \ge n} x_m$. Мы можем это сделать, так как $\{x_n\}_{n = 1}^\infty$ ограничена по условию теоремы. Несложно заметить 2 утверждения из данного определения:
	\begin{align*}
		&s_n \ge s_{n + 1}
		\\
		&s_n \ge \inf \{x_n\}
	\end{align*}
	А значит по теореме Вейерштрасса, данная последовательность сходится и имеет предел $L := \liml_{n \to \infty} s_n = \inf \{s_n\}$. 
	
	Покажем, что для этой последовательности верен первый пункт. По определению предела 
	$$
		\forall \eps > 0\ \exists N \in \N\ |\ \forall n > N\ |s_n - L| < \eps
	$$
	Так как $s_n := \sup \{x_n, x_{n + 1}, \dots\}$, то $x_n \le s_n < L + \eps$ (доказано следствие первой части п.1. из п.2.).
	
	Рассмотрим $N \in \N$ и $s_{N + 1} = \sup \{x_{N + 1}, x_{N + 2}, \dots\}$. Так как $L = \inf \{s_n\}$, то 
	$$
		s_{N + 1} \ge L
	$$
	А так как $s_n := \sup \{x_n, x_{n + 1}, \dots\}$, то ещё имеем
	$$
		\forall \eps > 0\ \forall N \in \N\ \exists n > N\ |\ x_n > s_{N + 1} - \eps \ge L - \eps \Ra x_n > L - \eps
	$$
	(доказано следствие второй части п.1. из п.2.)
	
	Теперь докажем, что из пункта 1. $L$ - наибольший частичный предел $\{x_n\}$. Построим подпоследовательность:
	\begin{align*}
		&\eps := 1 & &\Ra \exists n_1 \in \N\ |\ |x_{n_1} - L| < 1
		\\
		&\eps := 1/2 & &\Ra N'_2 := \max(N_2, n_1)\ \exists n_2 > N'_2\ |\ |x_{n_2} - L| < 1/2
		\\
		&\dots		
	\end{align*}
	Существование номера обусловлено тем, что мы вначале применяем первую часть пункта 1., а затем подставляем во вторую часть пункта 1. $N'_i := \max(N_i, n_{i - 1})$ и находим такое $n > N'_i$, что для него верны оба неравенства сразу.
	
	Получили $\{x_{n_k}\}_{k = 1}^\infty$ такую, что $\liml_{k \to \infty} x_{n_k} = L$
	
	Рассмотрим произвольную $\{x_{m_i}\}_{i = 1}^\infty$ такую, что $\exists \liml_{i \to \infty} x_{m_i} = t$ Из уже доказанного пункта 1. следует, что
	$$
		\forall \eps > 0\ \exists I \in \N \such \forall i > I\ \ x_{m_i} < L + \eps
	$$
	
	Совершая предельный переход в неравенстве, получим
	$$
		\forall \eps > 0\ t \le L + \eps
	$$
	Отсюда понятно, что $t \le L$, то есть $L$ действительно наибольший частичный предел.
\end{proof}

\begin{anote}
	По моему мнению, ключевая идея выше в том, что мы всегда из-за ограниченности можем рассмотреть последовательность $s_n$ и доказать, что её предел либо удовлетворяет другому определению, либо свойством (которое можно принять за определение).
\end{anote}


\subsubsection{Теорема Больцано—Вейерштрасса}
\begin{theorem} (Больцано-Вейерштрасса)
	Из каждой ограниченной последовательности можно выделить сходящуюся подпоследовательность
\end{theorem}

\begin{proof}
	$\{x_n\}_{n = 1}^\infty$ - ограниченная, то есть $\exists [a_1; b_1] \supset \{x_n\}_{n = 1}^\infty$
	
	Разделим отрезок пополам. Утверждение: хотя бы 1 из половин содержит бесконечное число членов последовательности.
	
	Пусть $[a_2; b_2]$ - та из половин $[a_1; b_1]$, которая содержит бесконечно много членов последовательности $\{x_n\}$. Продолжая, получим последовательность вложенных отрезков $\{[a_n; b_n]\}_{n = 1}^\infty$. Так как $b_n - a_n = \frac{b_1 - a_1}{2^{n - 1}}$.
	
	Следовательно, $\{[a_n; b_n]\}_{n = 1}^\infty$ - стягивающаяся система, пусть $c = \bigcap\limits_{n = 1}^\infty [a_n; b_n]$. Докажем, что $c$ - частичный предел.
	
	$x_{n_1} = x_1\ ;\ x_{n_2} \in [a_2; b_2]\ ;\ \dots\ ;\ x_{n_k} \in [a_k; b_k]$. Отсюда $0 \le |c - x_{n_k}| \le \frac{b_1 - a_1}{2^{n - 1}} \ra 0$.
\end{proof}

\begin{addition}
	Каждая числовая последовательность $\forall \{x_n\}_{n = 1}^\infty$ имеет хотя бы 1 частичный предел, то есть $\exists \{x_{n_k}\}_{k = 1}^\infty\ |\ \liml_{k \ra \infty} x_{n_k} = l \in \bar{\R}$
\end{addition}

\begin{proof}
	Если последовательность ограничена, то смотрим теорему Больцано-Вейерштрасса.
	
	Если последовательность неограничена сверху, то построим подпоследовательность:
	\begin{align*}
		&M := 1 & &\Ra \exists n_1 \in \N\ |\ x_{n_1} > 1
		\\
		&M := \max(2, x_1, x_2, \dots, x_{n_1}) & &\Ra \exists n_2 \in \N\ |\ x_{n_2} > \max(2, x_{n_2}) \ge 2,\ n_2 > n_1
		\\
		&\dots
	\end{align*}
	Получили $\{x_{n_k}\}_{k = 1}^\infty$ такую, что $\forall k \in \N\ x_{n_k} > k$. Несложно показать, что данная последовательность - бесконечно большая.
	
	Аналогично доказывается случай, когда последовательность неограничена снизу.
\end{proof}

\subsubsection{Критерий Коши сходимости числовой последовательности.}

\begin{definition}
	Последовательность $\{x_n\}_{n = 1}^\infty$ называется \textit{фундаментальной}, или же \textit{последовательностью Коши}, если $\forall \eps > 0\ \exists N \in \N\ |\ \forall n > N, p \in \N\ |x_{n + p} - x_n| < \eps$
\end{definition}

\begin{theorem} (Критерий Коши)
	Последовательность $\{x_n\}_{n = 1}^\infty$ сходится тогда и только тогда, когда она фундаментальна. 
\end{theorem}

\begin{proof}
	\begin{enumerate}
		\item Сходимость $\Ra$ фундаментальность
		
		Пусть $\liml_{n \ra \infty} x_n = l$, тогда
		$$
			\forall \eps > 0\ \exists N \in \N\ |\ \forall n > N\ |x_n - l| < \frac{\eps}{2}
		$$
		
		Тогда, $\forall p \in \N\ n + p > N \Ra |x_{n + p} - l| < \frac{\eps}{2}$
		
		$|x_{n + p} - x_n| = |x_{n + p} - l + l - x_n| \le |x_{n + p} - l| + |l - x_n| < \frac{\eps}{2} + \frac{\eps}{2} = \eps$
		
		\item Фундаментальность $\Ra$ ограниченность
		
		Согласно свойству фундаментальности, положим $\eps := 1 \Ra n := N + 1$. Теперь, 
		$$
			\forall p \in \N\ |x_{N + 1 + p} - x_{N + 1}| < 1 \Ra x_{N + 1} - 1 < x_{N + 1 + p} < x_{N + 1} + 1
		$$
		Отсюда для $\forall n \in \N$
		$$
			\min(x_1, \dots, x_{N + 1}) - 1 < x_n < \max(x_1, \dots, x_{N + 1}) + 1
 		$$
 		
 		\item Фундаментальность $\Ra$ ограниченность $\Ra$ сходимость. 
 		
		Так как последовательность ограничена, то по теореме Больцано-Вейерштрасса можно выделить сходящуюся подпоследовательность.
		$$
			\exists \{x_{n_k}\}_{k = 1}^\infty\ |\ \liml_{k \to \infty} x_{n_k} = l
		$$
		По определению предела,
		$$
			\forall \eps > 0\ \exists K \in \N\ |\ \forall k > K\ |x_{n_k} - l| < \frac{\eps}{2}
		$$
		При этом исходная последовательность фундаментальна. То есть
		$$
			\forall \eps > 0\ \exists N \in \N\ |\ \forall n > N, p \in \N\ |x_{n + p} - x_n| < \frac{\eps}{2}
		$$
		Рассмотрим $\forall                                                                                                                                                                                                                                                                                                                                                                                                                                                       m > \max(N, n_{K + 1})$, тогда
		$$
			|x_m - l| \le |x_m - x_{n_{K + 1}}| + |x_{n_{K + 1}} - l| < \frac{\eps}{2} + \frac{\eps}{2} = \eps
		$$
	\end{enumerate}
\end{proof}

